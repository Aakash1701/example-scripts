# image.unmix
- Creates a new image on which each band represents one of a specified set of "endmembers" for a specified multispectral satellite image.
- An endmember is the ideal "signature" of band-by-band values for a given land cover class. 

## Syntax

#### Javascript
```
newImage = oldImage.unmix( arrayOfEndmembers )
```

- *newImage* is the new image.
- *oldImage.unmix* is the specified image.
- *Endmembers* are the specified endmembers, given as array doubles.

Argument names used in documentation:
```
newImage = oldImage.unmix(endmembers, sumToOne, nonNegative)
```
- *sumToOne* constrains the outputs to sum to one.
- *nonNegative* constrains the outputs to be non-negative. 

## Example

#### Javascript
```
var MosaickedIMAGE    = ee.ImageCollection( 'LT5_L1T' ).filterDate( '2007-06-01','2007-09-30' ).median();
var EndmemberARRAY    = [ [88.0,42.0,48.0,38.0,86.0,115.0,59.0], 
                          [50.0,21.0,20.0,35.0,50.0,110.0,23.0],
                          [51.0,20.0,14.0, 9.0, 7.0,116.0, 4.0]  ];
var UnmixedIMAGE      = MosaickedIMAGE.unmix( EndmemberARRAY ); 
Map.setCenter(-118.274, 34.0514, 11); 
Map.addLayer( MosaickedIMAGE, null,           'Original Image' );
Map.addLayer( UnmixedIMAGE, {min: 0, max: 1}, 'Unmixed Image'  );
```
##### Note that the example above is equivalent to the following:
```
var MosaickedIMAGE    = ee.ImageCollection( 'LT5_L1T' ).filterDate( '2007-06-01','2007-09-30' ).median();
var ArrayedIMAGE      = MosaickedIMAGE.toArray(); //Set each pixel to a 1D array of its   7 band values
var ArrayedIMAGE      = ArrayedIMAGE.toArray(1);  //Set each pixel to a 2D array of its 7x7 band values
var UrbanARRAY        = [88,42,48,38,86,115,59];  //Urban endmember generated by sampling MosaickedIMAGE
var VegetARRAY        = [50,21,20,35,50,110,23];  //Veg   endmember generated by sampling MosaickedIMAGE
var WaterARRAY        = [51,20,14, 9, 7,116, 4];  //Water endmember generated by sampling MosaickedIMAGE
var EndmemberARRAY    = ee.Array( [UrbanARRAY, VegetARRAY, WaterARRAY] );
var InverseArrayIMAGE = ee.Image( EndmemberARRAY.matrixPseudoInverse().transpose() );
// Set each pixel to 3x1 array of endmembers fractions ranging from 0 to 1
var UnmixedArrayIMAGE = InverseArrayIMAGE.matrixMultiply( ArrayedIMAGE );
var Unmixed2dIMAGE    = UnmixedArrayIMAGE.arrayProject([0]);  //Project to axis 0 since axis 1 unnecessary
var Unmixed1dIMAGE    = Unmixed2dIMAGE.arrayFlatten([['urban', 'veg', 'water']]);  //Flatten to scalar image
Map.setCenter(-118.274, 34.0514, 11); 
Map.addLayer( MosaickedIMAGE, null,             'Raw Imagery'                                 );
Map.addLayer( Unmixed1dIMAGE, {min: 0, max: 1}, 'Unmixed (red=urban, green=veg, blue=water)'  );
```
